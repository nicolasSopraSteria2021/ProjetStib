<head>
  <meta name="viewport" content="with=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
<div class="container">
  <div class="row">
    <form [formGroup]="formulaireDate" (ngSubmit)="send()">
      Entrer une date antérieur :
      <input type="text" id="dateStart" formControlName="DateControle" placeholder="YYYY-MM-DD">
      <input type="submit" [disabled]="formulaireDate.invalid">
    </form>
  </div>
  <mat-card>
    <div class="row">
      <h4>Nombre de retard depuis le {{formulaireDate.value.DateControle}}</h4>
      <div class="col">
        <apx-chart
            [series]=[numberDelayMetro,numberDelayBus,numberDelayTram]
            [chart]="chartOptions.chart"
            [labels]="chartOptions.labels"
            [responsive]="chartOptions.responsive"
        ></apx-chart>
        Temps total de retard{{getHour(+timeDelayTram+timeDelayMetro+timeDelayBus)}}H{{getMinute(+timeDelayTram+timeDelayMetro+timeDelayBus)}}
      </div>
      <div class="col">
          <h3>Bus</h3>
           <apx-chart
          [series]=[numberDelayBus,numberNotDelayBus]
          [chart]="specificChartOptions.chart"
          [labels]="specificChartOptions.labels"
          [responsive]="chartOptions.responsive"
        ></apx-chart>
        Retard {{getHour(timeDelayBus)}}H{{getMinute(timeDelayBus)}}
      </div>
      <div class="col">
        <h3>Tram</h3>
        <apx-chart
          [series]=[numberDelayTram,numberNotDelayTram]
          [chart]="specificChartOptions.chart"
          [labels]="specificChartOptions.labels"
          [responsive]="chartOptions.responsive"
        ></apx-chart>
        Retard {{getHour(timeDelayTram)}}H{{getMinute(timeDelayTram)}}
      </div>

      <div class="col">
        <h3>Metro</h3>
        <apx-chart
          [series]=[numberDelayMetro,numberNotDelayMetro]
          [chart]="specificChartOptions.chart"
          [labels]="specificChartOptions.labels"
          [responsive]="chartOptions.responsive"
        ></apx-chart>
        Retard {{getHour(timeDelayMetro)}}H{{getMinute(timeDelayMetro)}}
      </div>
  </div>
  </mat-card>
  <br>
  <footer>
  <div class="row">
    <mat-card>
    <u>
        <i>
        <H3>
          Attention les lignes listés ci-dessous auront un retard supérieur à 10 minutes aujourd'hui.
          <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
          </svg>
        </H3>
      </i>
    </u>
    <div class="row"  *ngFor="let veh of trackingVehicule">
    <ul>
      <li>Ligne n°{{veh.lineNumber}} à déstination de {{veh.stationArrival.toLowerCase() | titlecase}} départ à {{veh.hourDeparture | date:'HH:mm'}}  avec {{veh.delayForecast}} de retard </li>
    </ul>
  </div>
  </mat-card>
    </div>
  </footer>
</div>



